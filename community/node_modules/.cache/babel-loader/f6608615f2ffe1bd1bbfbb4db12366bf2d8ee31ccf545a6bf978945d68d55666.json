{"ast":null,"code":"import React,{useState}from'react';import Nav from'./Nav';import useFetchUser from'./useFetchUser';import axios from'axios';import{useLocation,useNavigate}from'react-router-dom';import{SERVER_ADDRESS}from'./serverAddress/serverAddress';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function WritePost(){const{user}=useFetchUser();const navigate=useNavigate();const location=useLocation();const category_no=location.state.category_no;const path=location.state.form;const[title,setTitle]=useState('');const[content,setContent]=useState('');const writePost=async()=>{try{if(title===''&&content===''){alert('내용을 모두 입력해 주세요.');return false;}else{const response=await axios.post(`${SERVER_ADDRESS}/postdb/insert`,{category_no:category_no,title:title,content:content,writer:user.nickname},{withCredentials:true});if(response.data.success===true){alert('게시글이 작성되었습니다!');navigate(path,{state:{category_no:category_no}});return true;}}}catch(error){console.error(error);}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flex:1},children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(Nav,{user:user})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694.\",value:title,onChange:e=>setTitle(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC791\\uC131\\uC790\"}),user?/*#__PURE__*/_jsx(\"p\",{children:user.nickname}):null]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{maxLength:1000,placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694.\",value:content,onChange:e=>setContent(e.target.value)}),/*#__PURE__*/_jsxs(\"p\",{children:[content.length,\" / 1000\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:writePost,children:\"\\uC791\\uC131\\uD558\\uAE30\"})]})]});}export default WritePost;","map":{"version":3,"names":["React","useState","Nav","useFetchUser","axios","useLocation","useNavigate","SERVER_ADDRESS","jsx","_jsx","jsxs","_jsxs","WritePost","user","navigate","location","category_no","state","path","form","title","setTitle","content","setContent","writePost","alert","response","post","writer","nickname","withCredentials","data","success","error","console","style","display","flex","children","placeholder","value","onChange","e","target","maxLength","length","onClick"],"sources":["C:/Users/dbwns/OneDrive/바탕 화면/myProject/community/src/writePost.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Nav from './Nav';\r\nimport useFetchUser from './useFetchUser';\r\nimport axios from 'axios';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { SERVER_ADDRESS } from './serverAddress/serverAddress';\r\n\r\nfunction WritePost() {\r\n    const { user } = useFetchUser();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const category_no = location.state.category_no;\r\n    const path = location.state.form;\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n\r\n    const writePost = async () => {\r\n        try {\r\n            if (title === '' && content === '') {\r\n                alert('내용을 모두 입력해 주세요.');\r\n                return false;\r\n            } else {\r\n                const response = await axios.post(\r\n                    `${SERVER_ADDRESS}/postdb/insert`,\r\n                    { category_no: category_no, title: title, content: content, writer: user.nickname },\r\n                    {\r\n                        withCredentials: true,\r\n                    }\r\n                );\r\n\r\n                if (response.data.success === true) {\r\n                    alert('게시글이 작성되었습니다!');\r\n                    navigate(path, { state: { category_no: category_no } });\r\n                    return true;\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ display: 'flex', flex: 1 }}>\r\n            <header>\r\n                <Nav user={user} />\r\n            </header>\r\n\r\n            <div>\r\n                <div>\r\n                    <input\r\n                        placeholder=\"제목을 입력해 주세요.\"\r\n                        value={title}\r\n                        onChange={(e) => setTitle(e.target.value)}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <p>작성자</p>\r\n                    {user ? <p>{user.nickname}</p> : null}\r\n                </div>\r\n                <div>\r\n                    <textarea\r\n                        maxLength={1000}\r\n                        placeholder=\"내용을 입력해 주세요.\"\r\n                        value={content}\r\n                        onChange={(e) => setContent(e.target.value)}\r\n                    />\r\n                    <p>{content.length} / 1000</p>\r\n                </div>\r\n                <button onClick={writePost}>작성하기</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WritePost;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,GAAG,KAAM,OAAO,CACvB,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,cAAc,KAAQ,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/D,QAAS,CAAAC,SAASA,CAAA,CAAG,CACjB,KAAM,CAAEC,IAAK,CAAC,CAAGV,YAAY,CAAC,CAAC,CAC/B,KAAM,CAAAW,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,WAAW,CAAGD,QAAQ,CAACE,KAAK,CAACD,WAAW,CAC9C,KAAM,CAAAE,IAAI,CAAGH,QAAQ,CAACE,KAAK,CAACE,IAAI,CAChC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAE1C,KAAM,CAAAuB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,GAAIJ,KAAK,GAAK,EAAE,EAAIE,OAAO,GAAK,EAAE,CAAE,CAChCG,KAAK,CAAC,iBAAiB,CAAC,CACxB,MAAO,MAAK,CAChB,CAAC,IAAM,CACH,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,IAAI,CAC7B,GAAGpB,cAAc,gBAAgB,CACjC,CAAES,WAAW,CAAEA,WAAW,CAAEI,KAAK,CAAEA,KAAK,CAAEE,OAAO,CAAEA,OAAO,CAAEM,MAAM,CAAEf,IAAI,CAACgB,QAAS,CAAC,CACnF,CACIC,eAAe,CAAE,IACrB,CACJ,CAAC,CAED,GAAIJ,QAAQ,CAACK,IAAI,CAACC,OAAO,GAAK,IAAI,CAAE,CAChCP,KAAK,CAAC,eAAe,CAAC,CACtBX,QAAQ,CAACI,IAAI,CAAE,CAAED,KAAK,CAAE,CAAED,WAAW,CAAEA,WAAY,CAAE,CAAC,CAAC,CACvD,MAAO,KAAI,CACf,CACJ,CACJ,CAAE,MAAOiB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACxB,CACJ,CAAC,CAED,mBACItB,KAAA,QAAKwB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,IAAI,CAAE,CAAE,CAAE,CAAAC,QAAA,eACrC7B,IAAA,WAAA6B,QAAA,cACI7B,IAAA,CAACP,GAAG,EAACW,IAAI,CAAEA,IAAK,CAAE,CAAC,CACf,CAAC,cAETF,KAAA,QAAA2B,QAAA,eACI7B,IAAA,QAAA6B,QAAA,cACI7B,IAAA,UACI8B,WAAW,CAAC,2DAAc,CAC1BC,KAAK,CAAEpB,KAAM,CACbqB,QAAQ,CAAGC,CAAC,EAAKrB,QAAQ,CAACqB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7C,CAAC,CACD,CAAC,cACN7B,KAAA,QAAA2B,QAAA,eACI7B,IAAA,MAAA6B,QAAA,CAAG,oBAAG,CAAG,CAAC,CACTzB,IAAI,cAAGJ,IAAA,MAAA6B,QAAA,CAAIzB,IAAI,CAACgB,QAAQ,CAAI,CAAC,CAAG,IAAI,EACpC,CAAC,cACNlB,KAAA,QAAA2B,QAAA,eACI7B,IAAA,aACImC,SAAS,CAAE,IAAK,CAChBL,WAAW,CAAC,2DAAc,CAC1BC,KAAK,CAAElB,OAAQ,CACfmB,QAAQ,CAAGC,CAAC,EAAKnB,UAAU,CAACmB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/C,CAAC,cACF7B,KAAA,MAAA2B,QAAA,EAAIhB,OAAO,CAACuB,MAAM,CAAC,SAAO,EAAG,CAAC,EAC7B,CAAC,cACNpC,IAAA,WAAQqC,OAAO,CAAEtB,SAAU,CAAAc,QAAA,CAAC,0BAAI,CAAQ,CAAC,EACxC,CAAC,EACL,CAAC,CAEd,CAEA,cAAe,CAAA1B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}